!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(1),n(2);let r=Math.random;var a,i,o;!function(e){e[e.M=0]="M",e[e.G=1]="G",e[e.GO=2]="GO"}(a||(a={})),function(e){e[e.L=0]="L",e[e.R=1]="R"}(i||(i={})),function(e){e[e.RP=0]="RP",e[e.LR=1]="LR",e[e.RR=2]="RR",e[e.LP=3]="LP",e[e.JP=4]="JP",e[e.UP=5]="UP",e[e.AP=6]="AP",e[e.AR=7]="AR"}(o||(o={}));var c,u=TC(document.getElementById("c"));function s(){const e=(125*r()+0)/1e3;return r()>=.5?(2-e)*Math.PI:e*Math.PI}function l(e,t){return e.p.x<t.p.x+t.w&&e.p.x+e.w>t.p.x&&e.p.y<t.p.y+t.h&&e.p.y+e.h>t.p.y}t.collide=l,(c=["sh.png","h.png","bh.png","m.png","f.png","sr.png","si.png","ss.png","b.png","a.png"],new Promise((e,t)=>{let n=new Array;c.forEach((t,r)=>{const a=new Image;a.src=t,a.onload=()=>{const t=document.createElement("canvas").getContext("2d");t.canvas.height=a.height,t.canvas.width=a.width,t.drawImage(a,0,0,a.width,a.height);const i={w:a.width,h:a.height,t:TCTex(u.g,t.canvas,a.width,a.height)};t.clearRect(0,0,a.width,a.height),t.save(),t.scale(-1,1),t.drawImage(a,-1*a.width,0,a.width,a.height),t.restore();const o={w:a.width,h:a.height,t:TCTex(u.g,t.canvas,a.width,a.height)};var s=2*r;n[s++]=i,n[s]=o,r==c.length-1&&setTimeout(()=>{e(n)},1e3)}})})).then(e=>{const[t,n,c,p,h,d,,v,f,g,x,m,y,w,b,T,A,P,R,,]=e,M=function(){const e=document.createElement("canvas").getContext("2d");return e.canvas.width=4,e.canvas.height=4,e.clearRect(0,0,u.width,u.height),e.fillStyle="#ff6",e.beginPath(),e.arc(2,2,2,0,2*Math.PI),e.fill(),TCTex(u.g,e.canvas,4,4)}();let L=0,k=0,S=null;const V=10;let B=0,E=0,C=10;const q=30,O=6;let j=0,G=0;const[I,_]=[u.g.canvas.width,u.g.canvas.height];let F=[],D=[];function Q(e,t,n){return{p:{x:e,y:t},v:{x:n,y:0},d:i.L,w:20,h:20,vi:!1,hi:!1,l:3}}const U={p:{x:0,y:0},w:300,h:150};window.cam=U;U.p;let J=0;function H(e,t){var n=Math.random;const r=2*O,a=3*q;for(var o=0;o<10;o++){const o=n()*(r- -r)-r,u=n()*(a- -a)-a;var c=n()*Math.PI*2;F.push({p:{x:e,y:t},v:{x:o*Math.cos(c),y:u*Math.sin(c)},d:i.L,h:4,w:4,vi:!0})}}u.g.canvas.addEventListener("click",e=>{let t=1;const n=function(e,t){var n=e.getBoundingClientRect();return{x:.3*(t.clientX-n.left),y:.15*(t.clientY-n.top)}}(u.g.canvas,e);for(var a=0;a<z.es.length;a++){const e=z.es[a];!e.vi&&t>0&&(e.p.x=U.p.x+n.x,e.p.y=U.p.y+n.y,e.vi=!0,e.vi=!0,e.l=5,e.v.x=2.2*r()+1.7*(z.p.p.x>e.p.x?O:-O),e.d=e.v.x>0?i.L:i.R,t--)}});let z={p:{p:{x:128,y:0},v:{x:0,y:0},d:i.R,s:!1,w:20,h:20,vi:!0,l:3},es:function(e,t,n){const a=[];for(var i=0;i<n;i++)a.push(Q(e,t,O*r()*2.2+1.7));return a}(34,0,50),bs:function(e){const t=[];for(let n=0;n<e;n++)t.push({p:{x:50,y:50},v:{x:0,y:0},vi:!1,d:i.L,w:4,h:4});return t}(60),hs:function(e){const t=[];for(let n=0;n<e;n++)t.push({p:{x:250,y:0},v:{x:0,y:0},vi:!0,d:i.L,w:16,h:16});return t}(1),s:a.M};const W=_-10,X=.7*W,Y={p:{x:50,y:W},v:{x:0,y:0},vi:!0,d:i.L,w:150,h:20};function K(e,t,n){return{p:{x:e,y:t},w:n,h:20,d:i.L,v:{x:0,y:0},vi:!0}}const N=[K(0,W,900),K(200,X,260),K(300,X,360)],Z=e=>{L=(e-j)/100,k=e,j=e,we(z),function(e,t){if(t.s==a.G){J>2e-4&&function(){const e=r()%Math.PI*2,t=Math.sin(e)*J,n=Math.cos(e)*J;U.p.x=0+t,U.p.y=0+n,J*=.9}();const a=t.p;switch(function(e){let t=!1;for(var n=0;n<N.length;n++)t=t||xe(e,N[n]);return e.p.y+e.h==W||t}(a)&&(he=2),e){case o.JP:he>0&&(he--,a.v.y=a.c?-q/2:-q,jumpSound()),a.s=!1;break;case o.LP:a.d=i.L,a.v.x=a.c?-O/2:-O,a.s=!1;break;case o.RP:a.d=i.R,a.v.x=a.c?O/2:O,a.s=!1;break;case o.LR:case o.RR:a.v.x=0;break;case o.AP:if(t.p.c){let e=t.p.c;e.vi=!0,e.p.x=t.p.d==i.L?t.p.p.x-25:t.p.p.x+25,e.p.y=t.p.p.y-10,t.p.c=null}else{le.reset(),a.s=!0,a.v.x=a.d==i.L?1.5:-1.5;for(var n=0;n<t.bs.length;n++){const e=t.bs[n];if(!e.vi&&0==pe){const t=s();e.p.x=a.p.x+a.w+e.w,e.p.y=a.p.y+a.h/2.4,e.v.x=(a.d==i.R?35:-35)*Math.cos(t),e.v.y=5*Math.sin(t),e.vi=!0,pe=3,fireSound(),J=2;break}}}break;case o.AR:a.v.x=0}me(t.p);for(n=0;n<t.hs.length;n++){const e=t.hs[n];me(e),e.vi&&l(t.p,e)&&!t.p.c&&(e.vi=!1,t.p.c=e),e.vi&&l(e,Y)&&(E+=500,e.vi=!1)}for(n=0;n<t.es.length;n++){const e=t.es[n];0==(de=Math.max(de-1,0))&&(e.hi=!1),me(e),(e.p.x<0||e.p.x+20>900)&&(e.v.x=-1*e.v.x,e.d=e.v.x>0?i.L:i.R);for(var c=0;c<t.bs.length;c++){const n=t.bs[c];e.vi&&n.vi&&l(n,e)&&(hitSound(),e.hi=!0,de=8,e.p.x+=n.v.x>0?18:-18,0==e.l?(J=4,H(e.p.x+e.w/2,e.p.y+e.h/2),e.vi=!1,e.v.x=0,E+=100):e.l=Math.max(e.l-1,0),n.vi=!1,n.v.x=0)}e.vi&&l(e,t.p)&&t.p.l--}for(n=0;n<t.bs.length;n++){fe(t.bs[n])}for(n=0;n<F.length;n++){const e=F[n];me(e);for(var u=0;u<N.length;u++)xe(e,N[u])&&(F.splice(n,1),D.push(e))}pe=Math.max(0,pe-1),p=t.p,U.p.x=Math.max(p.p.x-U.w/2,0),C<=0&&E>0&&(B+=10,coinSound(),C=10,E=Math.max(E-10,0)),C--,Y.p.y+=.1*(W-10-Y.p.y),Y.p.y=Math.floor(Y.p.y)==W-10?W:Y.p.y}else t.s==a.M&&e==o.AP&&(t.s=a.G);var p}(S,z),S=null,G=requestAnimationFrame(Z)};const $=e=>{switch(console.log("handlerStart"),e.currentTarget.id){case"a":S=o.JP;break;case"b":S=o.AP;break;case"left":S=o.LP;break;case"right":S=o.RP}},ee=e=>{switch(console.log("handlerEnd"),e.currentTarget.id){case"b":S=o.AR;break;case"left":S=o.LR;break;case"right":S=o.RR}},te=document.querySelectorAll("rect"),ne={passive:!0};te.forEach(e=>{e.addEventListener("touchstart",$,ne),e.addEventListener("touchmove",$,ne),e.addEventListener("touchend",ee,ne),e.addEventListener("touchcancel",ee,ne)});window.addEventListener("keydown",e=>{switch(e.keyCode){case 37:S=o.LP;break;case 39:S=o.RP;break;case 38:S=o.JP;break;case 13:S=o.UP;break;case 32:S=o.AP}},!0);function re(e,t,n,r,a){const o=a.length;let c=0,s=0;this.reset=function(){c<o-1||(c=0)},this.update=function(o){(s+=1)>n&&(s=0,c<a.length-1?c+=1:r&&(c=0));const[l,p,h,d]=a[c];let v=o.d==i.R?e:t;u.img(v.t,-U.p.x+(o.p.x+o.w/2),-U.p.y+o.p.y,o.w,o.h,l,p,h,d)}}window.addEventListener("keyup",e=>{switch(e.keyCode){case 37:S=o.LR;break;case 39:S=o.RR;break;case 32:S=o.AR}},!0);const ae=new re(h,d,2,!0,[[0,0,1,1]]),ie=new re(A,P,5,!0,[[0,0,1,.5],[0,.5,1,1]]),oe=new re(t,n,14,!1,[[0,0,1,1/3],[0,1/3,1,1/3*2],[0,1/3*2,1,1]]),ce=new re(y,w,20,!0,[[0,0,1,.5],[0,.5,1,1]]),ue=new re(c,p,20,!0,[[0,0,1,.5],[0,.5,1,1]]),se=new re(x,m,8,!0,[[0,0,1,.2],[0,.2,1,.4],[0,.4,1,.6],[0,.6,1,.8],[0,.8,1,1]]),le=new re(b,T,3,!1,[[0,0,1,.25],[0,.25,1,.5],[0,.5,1,.75],[0,.75,1,1]]);let pe=0,he=2,de=0;function ve(e){let t=-1;for(var n=0;n<N.length;n++)t=xe(e,N[n])?N[n].p.y:-1;return t}function fe(e){(function(e){return e.p.x<0||e.p.x>900})(e)&&(e.vi=!1,e.v.x=0),e.p.x+=e.v.x*L,e.p.y+=e.v.y*L}function ge(e,t){return l(e,t)&&t.p.y+t.h/2>e.p.y}function xe(e,t){return l(e,t)&&e.p.y<t.p.y}function me(e){const t=ve(e);e.p.y=t<0?e.p.y+e.v.y*L:t-e.h,e.p.x+=e.v.x*L,function(e){e.v.y=ve(e)<0?e.v.y+V*L:e.v.y}(e);for(var n=0;n<N.length;n++)ge(e,N[n])&&e.v.y<0&&(e.v.y=0),xe(e,N[n])&&e.v.y>0&&(e.v.y=0)}function ye(e,t,n,r){const a=function(e){const t=["abcdefghijklm","nopqrstuvwxyz","0123456789:!+"];let n=new Array;for(var r=0;r<e.length;r++){const i=e.charAt(r);for(var a=0;a<t.length;a++){const e=t[a].indexOf(i);e>-1&&n.push([4*e/52,4*a/12,(4*e+4)/52,(4*a+4)/12])}}return n}(e);for(var i=-e.length*(4*r)/2,o=0;o<a.length;o++)u.img(R.t,i+t,n,4*r,4*r,a[o][0],a[o][1],a[o][2],a[o][3]),i+=4*r+1}const we=e=>{if(u.g.canvas.style.width="auto",u.g.canvas.style.height=Math.round(.95*window.innerHeight)+"px",u.g.viewport(0,0,u.g.canvas.width,u.g.canvas.height),window.innerHeight>window.innerWidth)u.cls(),u.bkg(0,0,0),ye("flip:phone",40,60,1);else if(e.s==a.G){u.cls(),u.bkg(57/255,73/255,81/255),function(){u.push(),u.scale(6,6);for(var e=0;e<100;e+=20)u.img(v.t,.06*-U.p.x+e,.06*-U.p.y+5,v.w,v.h,0,0,1,1);u.pop()}();const n=e.p;!function(){for(var e=0;e<N.length;e++){const n=N[e];for(var t=n.p.x;t<=n.p.x+n.w;t+=20){const e=t%7==0?g:f;u.img(e.t,-U.p.x+t,-U.p.y+(n.p.y-10),e.w,e.h,0,0,1,1)}}}(),ye("extraction",-U.p.x+Y.p.x+Y.w/2,Y.p.y-15,1),ye("area",-U.p.x+Y.p.x+Y.w/2,Y.p.y-10,1),n.s?le.update(n):0==n.v.x?n.c?oe.update(n):ce.update(n):n.c?(oe.reset(),oe.update(n)):se.update(n);for(var t=0;t<e.es.length;t++){const n=e.es[t];n.vi&&(n.hi?ae.update(n):ie.update(n))}for(t=0;t<e.bs.length;t++){const n=e.bs[t];n.vi&&u.img(M,-U.p.x+n.p.x,-U.p.y+n.p.y,4,4,0,0,1,1)}for(t=0;t<e.hs.length;t++){const n=e.hs[t];n.vi&&ue.update(n)}for(t=0;t<F.length;t++){const e=F[t];e&&e.vi&&u.img(h.t,-U.p.x+e.p.x,-U.p.y+e.p.y,8,8,0,0,.7,1)}for(t=0;t<D.length;t++){const e=D[t];e&&e.vi&&u.img(h.t,-U.p.x+e.p.x,-U.p.y+e.p.y,8,8,0,0,.7,1)}ye("score: "+B,I/2,10,2)}else e.s==a.M&&(ye("back",I/2,_/3,4),ye("to",I/2,_/3+16+4,4),ye("rescue",I/2,_/3+32+8,4),ye("press+attack+to+start",I/2,_/2+32+14,1));u.flush()};if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){document.querySelectorAll("svg").forEach(e=>{e.style.display="block"})}requestAnimationFrame(Z)})},function(e,t){function n(e,t,n){var r=e.createShader(n);return e.shaderSource(r,t),e.compileShader(r),r}function r(e,t,r){var a=e.createProgram(),i=n(e,t,35633),o=n(e,r,35632);return e.attachShader(a,i),e.attachShader(a,o),e.linkProgram(a),a}function a(e,t,n,r){var a=e.createBuffer();return e.bindBuffer(t,a),e.bufferData(t,n,r),a}window.TCShd=n,window.TCPrg=r,window.TCBuf=a,window.TCTex=function(e,t,n,r){var a=e.createTexture();return e.bindTexture(3553,a),e.texParameteri(3553,10242,33071),e.texParameteri(3553,10243,33071),e.texParameteri(3553,10240,9728),e.texParameteri(3553,10241,9728),e.texImage2D(3553,0,6408,6408,5121,t),e.bindTexture(3553,null),a.width=n,a.height=r,a},window.TC=function(e){var t,n,i,o=e.getContext("webgl"),c=e.width,u=e.height,s=r(o,["precision lowp float;","attribute vec2 a, b;","attribute vec4 c;","varying vec2 d;","varying vec4 e;","uniform mat4 m;","uniform vec2 r;","void main(){","gl_Position=m*vec4(a,1.0,1.0);","d=b;","e=c;","}"].join("\n"),["precision lowp float;","varying vec2 d;","varying vec4 e;","uniform sampler2D f;","void main(){","gl_FragColor=texture2D(f,d)*e;","}"].join("\n")),l=o.bufferSubData.bind(o),p=o.drawElements.bind(o),h=o.bindTexture.bind(o),d=o.clear.bind(o),v=o.clearColor.bind(o),f=new ArrayBuffer(873760),g=new Float32Array(f),x=new Uint32Array(f),m=new Uint16Array(131064),y=a(o,34963,m.byteLength,35044),w=a(o,34962,f.byteLength,35048),b=0,T=new Float32Array([1,0,0,1,0,0]),A=new Float32Array(100),P=0,R=Math.cos,M=Math.sin,L=null,k=null;o.blendFunc(770,771),o.enable(3042),o.useProgram(s),o.bindBuffer(34963,y);for(var S=indexB=0;S<65532;S+=6,indexB+=4)m[S+0]=indexB,m[S+1]=indexB+1,m[S+2]=indexB+2,m[S+3]=indexB+0,m[S+4]=indexB+3,m[S+5]=indexB+1;return l(34963,0,m),o.bindBuffer(34962,w),t=o.getAttribLocation(s,"a"),n=o.getAttribLocation(s,"b"),i=o.getAttribLocation(s,"c"),o.enableVertexAttribArray(t),o.vertexAttribPointer(t,2,5126,0,20,0),o.enableVertexAttribArray(n),o.vertexAttribPointer(n,2,5126,0,20,8),o.enableVertexAttribArray(i),o.vertexAttribPointer(i,4,5121,1,20,16),o.uniformMatrix4fv(o.getUniformLocation(s,"m"),0,new Float32Array([2/c,0,0,0,0,-2/u,0,0,0,0,1,1,-1,1,0,0])),o.activeTexture(33984),k={g:o,c:e,col:4294967295,bkg:function(e,t,n){v(e,t,n,1)},cls:function(){d(16384)},trans:function(e,t){T[4]=T[0]*e+T[2]*t+T[4],T[5]=T[1]*e+T[3]*t+T[5]},scale:function(e,t){T[0]=T[0]*e,T[1]=T[1]*e,T[2]=T[2]*t,T[3]=T[3]*t},rot:function(e){var t=T[0],n=T[1],r=T[2],a=T[3],i=M(e),o=R(e);T[0]=t*o+r*i,T[1]=n*o+a*i,T[2]=t*-i+r*o,T[3]=n*-i+a*o},push:function(){A[P+0]=T[0],A[P+1]=T[1],A[P+2]=T[2],A[P+3]=T[3],A[P+4]=T[4],A[P+5]=T[5],P+=6},pop:function(){P-=6,T[0]=A[P+0],T[1]=A[P+1],T[2]=A[P+2],T[3]=A[P+3],T[4]=A[P+4],T[5]=A[P+5]},img:function(e,t,n,r,a,i,o,c,u){var s=t,d=n,v=t+r,m=n+a,y=t,w=n+a,A=t+r,P=n,R=T[0],M=T[1],S=T[2],V=T[3],B=T[4],E=T[5],C=0,q=k.col;(e!=L||b+1>=10922)&&(l(34962,0,f),p(4,6*b,5123,0),b=0,L!=e&&h(3553,L=e)),C=20*b,g[C++]=s*R+d*S+B,g[C++]=s*M+d*V+E,g[C++]=i,g[C++]=o,x[C++]=q,g[C++]=v*R+m*S+B,g[C++]=v*M+m*V+E,g[C++]=c,g[C++]=u,x[C++]=q,g[C++]=y*R+w*S+B,g[C++]=y*M+w*V+E,g[C++]=i,g[C++]=u,x[C++]=q,g[C++]=A*R+P*S+B,g[C++]=A*M+P*V+E,g[C++]=c,g[C++]=o,x[C++]=q,++b>=10922&&(l(34962,0,f),p(4,6*b,5123,0),b=0)},flush:function(){0!=b&&(l(34962,0,g.subarray(0,20*b)),p(4,6*b,5123,0),b=0)}}}},function(e,t){function n(e){this.n=e.createGain(),this.n.gain.value=0,this.addEventToQueue=function(){this.n.gain.linearRampToValueAtTime(0,e.currentTime),this.n.gain.linearRampToValueAtTime(1,e.currentTime+.001),this.n.gain.linearRampToValueAtTime(.3,e.currentTime+.101),this.n.gain.linearRampToValueAtTime(0,e.currentTime+.5)}}var r=new(window.AudioContext||window.webkitAudioContext),a=new function(e){for(var t=e.sampleRate,n=e.createBuffer(1,t,e.sampleRate),r=n.getChannelData(0),a=0;a<t;a++)r[a]=2*Math.random()-1;this.s=e.createBufferSource(),this.s.buffer=n,this.s.loop=!0}(r),i=new n(r),o=new n(r),c=new n(r),u=new n(r),s=r.createBiquadFilter(),l=r.createGain(),p=0,h=!1;a.s.connect(i.n),a.s.connect(o.n),a.s.connect(c.n),a.s.connect(u.n),s.type="lowpass",s.Q.value=1,s.frequency.value=800,i.n.connect(s),o.n.connect(s),c.n.connect(s),u.n.connect(s),l.gain.value=5,s.connect(l),l.connect(r.destination);var d=r.createOscillator();d.type="square";var v=r.createGain();d.connect(v),v.connect(r.destination),v.gain.setValueAtTime(0,r.currentTime);var f=!1;var g=r.createOscillator();g.type="square";var x=r.createGain();g.connect(x),x.connect(r.destination),x.gain.setValueAtTime(0,r.currentTime);var m=!1;window.fireSound=function(){h||(h=!0,a.s.start(0)),++p>4&&(p=1),1==p&&i.addEventToQueue(),2==p&&o.addEventToQueue(),3==p&&c.addEventToQueue(),4==p&&u.addEventToQueue()},window.jumpSound=function(){const e=(2*Math.random()+1)/2;f||(d.start(0),f=!0),d.frequency.setValueAtTime(200*e,r.currentTime),v.gain.setValueAtTime(.05,r.currentTime),v.gain.exponentialRampToValueAtTime(.6,r.currentTime+.1),d.frequency.exponentialRampToValueAtTime(280*e,r.currentTime+.4),v.gain.exponentialRampToValueAtTime(.001,r.currentTime+.4),v.gain.setValueAtTime(0,r.currentTime+.4)},window.hitSound=function(){var e=r.createOscillator();e.type="square";var t=r.createGain();e.connect(t),t.connect(r.destination),t.gain.setValueAtTime(0,r.currentTime),e.type="square",e.frequency=880.6,e.start(0),t.gain.setValueAtTime(1,r.currentTime),e.frequency.exponentialRampToValueAtTime(.01,r.currentTime+.5),t.gain.exponentialRampToValueAtTime(.01,r.currentTime+.5),t.gain.setValueAtTime(0,r.currentTime+.5)},window.coinSound=function(){m||(g.start(0),m=!0),g.frequency.setValueAtTime(1800,r.currentTime),x.gain.setValueAtTime(.005,r.currentTime),x.gain.exponentialRampToValueAtTime(.05,r.currentTime+.1),g.frequency.exponentialRampToValueAtTime(1800,r.currentTime+.4),x.gain.exponentialRampToValueAtTime(.001,r.currentTime+.4),x.gain.setValueAtTime(0,r.currentTime+.4)}}]);